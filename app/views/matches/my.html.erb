<% if current_user.candidate %>
  <div class="container">
    <h2><strong>My Applications</strong></h2>
    <div class="card-matches-container">
      <% @matches.each do |match| %>
        <div class="card-match">
          <div class="card-match-info">
            <%= cl_image_tag match.job.company.logo.key, class: "company-logo" %>
            <div class="job-details">
              <strong><%= match.job.title %></strong> at <%= match.job.company.name %>
              <br><%= match.job.location %>
              <br>$<%= match.job.salary %>
              <div class="status">
                <div class="progress" style="height: 23px;width:100%">
                  <% if match.status == "Submitted" %>
                    <div class="progress-bar-striped progress-bar-animated bg-warning" role="progressbar"
                    aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width:20%">
                      Submitted
                    </div>
                  <% elsif match.status == "Review" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width:30%">
                      Review
                    </div>
                  <% elsif match.status == "First_interview" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width:50%">
                      First Interview
                    </div>
                  <% elsif match.status == "Second_interview" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:60%">
                      Second Interview
                    </div>
                  <% elsif match.status == "Job_offer" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="width:90%">
                      Job Offer!
                    </div>
                  <% elsif match.status == "Onboarded" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                      Onboarded!
                    </div>
                  <% elsif match.status == "Rejected" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                      Rejected
                    </div>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
          <div class="card-match-actions">
            <%= link_to job_path(match.job), data: {turbo_method: :get} do %>
              <i class="fa-solid fa-eye"></i>
            <% end %>
            <%= link_to match_path(match), data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to withdrawal from this application?"} do %>
              <i class="fa-solid fa-trash"></i>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  Error. Page not found.
<% end %>
